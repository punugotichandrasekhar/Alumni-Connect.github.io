{% extends 'index.html' %}


{% block navbar %}
    <ul class="navbar-nav ml-auto">
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('alumni_home')}}" style="color: white;">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('alumni_gallery')}}" style="color: white; padding-left: 30px;">Gallery</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('alumni_news')}}" style="color: white; padding-left: 30px;">News</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('alumni_achiever')}}" style="color: white; padding-left: 30px;">Achievers</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('events_list')}}" style="color: white; padding-left: 30px;">Events</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('alumni_list')}}" style="color: white; padding-left: 30px;">Chatbox</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('alumni_chatbot')}}" style="color: white; padding-left: 30px;">Chatbot</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('profile')}}" style="color: yellow; padding-left: 30px;">Profile</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('index')}}" style="color: white; padding-left: 30px;">Logout</a>
        </li>
    </ul>
{% endblock %}


{% block content %}
    <div style="margin-top: 50px; min-height: 650px; height: auto; background-color: rgba(0, 0, 0, 0.655);">
        <div class="container-fluid" style="margin-top: -50px;">
            <div class="container mt-5">
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-md-10 col-sm-12">
                        <div class="card shadow-lg border-0 rounded">
                            <div class="card-body" style="background-color: rgba(255, 255, 255, 0.9);">
                                <h1 class="text-center mb-4">Update Profile</h1>

                                {% if message %}
                                    <div class="alert alert-info text-center">{{ message }}</div>
                                {% endif %}

                            

                                <form action="{{ url_for('profile') }}" method="post" enctype="multipart/form-data">
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">User Name</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="name" class="form-control" value="{{ data.name }}" placeholder="User Name" required minlength="3" maxlength="30" pattern="[A-Za-z\s]+" title="User Name should be 3-30 characters long and only contain letters and spaces">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">Email ID</label>
                                        <div class="col-sm-8">
                                            <input type="email" name="email" class="form-control" value="{{ data.email }}" placeholder="Email ID" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">Graduation Year</label>
                                        <div class="col-sm-8">
                                            <input type="number" name="graduation_year" class="form-control" value="{{ data.graduation_year }}" placeholder="Graduation Year" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">Field of Study</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="field_of_study" class="form-control" value="{{ data.field_of_study }}" placeholder="Field of Study" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">Current Job Title</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="current_job_title" class="form-control" value="{{ data.current_job_title }}" placeholder="Current Job Title" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">USN Number</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="USN_no" class="form-control" value="{{ data.USN_no }}" placeholder="USN Number" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">Company</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="company" class="form-control" value="{{ data.company }}" placeholder="Company" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">Company Location</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="location" class="form-control" value="{{ data.location }}" placeholder="Company Location" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">LinkedIn Profile Link</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="linkedin" class="form-control" value="{{ data.linkedin }}" placeholder="LinkedIn Profile Link" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">Password</label>
                                        <div class="col-sm-8">
                                            <input type="password" name="password" class="form-control" value="{{ data.password }}" placeholder="Password" required minlength="8" title="Password must be at least 8 characters long">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-4 col-form-label">Profile Image</label>
                                        <div class="col-sm-8">
                                            <img src="data:image/jpeg;base64,{{ data.img }}" style="height: 100px; width: 100px; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imageModal" data-img-src="data:image/jpeg;base64,{{ data.img }}" />
                                            <!-- Bootstrap Modal -->
                <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="imageModalLabel">Image Preview</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img id="modalImage" src="" class="img-fluid" alt="Image Preview" />
                            </div>
                        </div>
                    </div>
                </div>
                
                                            <input type="file" name="img" class="form-control" accept="image/*">
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary btn-lg">Update</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const imageModal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
    
            imageModal.addEventListener('show.bs.modal', function (event) {
                const triggerElement = event.relatedTarget; // The element that triggered the modal
                const imgSrc = triggerElement.getAttribute('data-img-src'); // Get the image source from data attribute
                modalImage.src = imgSrc; // Set the modal image source
            });
        });
    </script>
{% endblock %}